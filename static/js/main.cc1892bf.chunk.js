(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},122:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=a(37),l=(a(103),a(155)),u=a(177),s=a(176),d=a(158),m=a(157),p=a(159),h=a(160),f=a(161),E=a(162),y=Object(l.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}});function g(){var e=y();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement(h.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"}),r.a.createElement(f.a,{variant:"h6",className:e.title},"WeatherApp"),r.a.createElement(E.a,{color:"inherit"},"Login"))))}var b=a(22),C=a(36),w=a(24),v=a(23),O=a(25),j=a(18),S=a.n(j),_=a(84),x=a(40),D=a.n(x),R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weather",a="http://api.openweathermap.org/data/2.5/".concat(t,"?q=").concat(e,"&units=metric&APPID=").concat("ea0b23131c72bacfe9c361211bb6ea7f");return fetch(a).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){throw e})},A=function(e){var t=e.wind.speed,a=e.main,n=a.humidity,r=a.temp,c=e.weather;return{humidity:n,weatherState:I(c),temperature:r,wind:"".concat(t,"m/s")}},I=function(e){var t=Object(_.a)(e,1)[0];return{main:t.main,description:t.description,icon:t.icon}},T=function(e){return function(t){t(function(e){return{type:"SET_CITY!",payload:e}}(e)),R(e,"forecast").then(function(a){console.log(a);var n=a.list.filter(function(e){return 6===D.a.unix(e.dt).utc().hour()||12===D.a.unix(e.dt).utc().hour()||18===D.a.unix(e.dt).utc().hour()}).map(function(e){return{weekDay:D.a.unix(e.dt).format("ddd"),hour:D.a.unix(e.dt).hour(),data:{temperature:e.main.temp,wind:e.wind.speed,humidity:e.main.humidity,weatherState:I(e.weather)}}});console.log(n),t(function(e){return{type:"SET_FORECAST_DATA",payload:e}}({city:e,forecastExtend:n}))}).catch(function(e){return console.log("".concat(e))})}},k=function(e){return{type:"ADD_CITY",payload:e}},M=function(e){return function(t){t({type:"SEARCH_CITY_START"}),function(e){var t="http://geodb-free-service.wirefreethought.com/v1/geo/cities?limit=5&offset=0&namePrefix=".concat(e);return fetch(t).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})}(e).then(function(e){var a=e.data.map(function(e){return e.name+","+e.country});console.log(a),t({type:"SEARCH_CITY_SUCCESS",payload:a})}).catch(function(e){return t({type:"SEARCH_CITY_FAIL",payload:e})})}},L=function(e){var t=e.icon;return"http://openweathermap.org/img/w/".concat(t,".png")},N=Object(l.a)(function(e){return{temperature:{flexGrow:"2",display:"flex",justifyContent:"center",alignItems:"center"}}}),H=function(e){var t=e.temperature,a=e.weatherState,n=N();return r.a.createElement("div",{className:n.temperature},r.a.createElement("img",{src:L(a),alt:"",className:"icon-img"}),r.a.createElement("h3",null,"  ".concat(t),r.a.createElement("span",{className:"tempDegrees"},"C\xba")))},F=Object(l.a)(function(e){return{extraInfo:{flexGrow:"1",color:"blue",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}}),Y=function(e){var t=e.humidity,a=e.wind,n=F();return r.a.createElement("div",{className:n.extraInfo},r.a.createElement("span",null,"Humidity: ".concat(t,"%")),r.a.createElement("span",null,"Wind: ".concat(a)))},W=Object(l.a)(function(e){return{root:{display:"flex",backgroundColor:"rgba(240, 240, 240, .5)",boxSizing:"border-box"}}}),B=function(e){var t=e.data,a=W(),n=t.temperature,c=t.weatherState,o=t.humidity,i=t.wind;return r.a.createElement("div",{className:a.root},r.a.createElement(H,{temperature:n,weatherState:c}),r.a.createElement(Y,{humidity:o,wind:i}))},G=a(80),P=a.n(G),U=a(163),q=a(164),J=a(165),X=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(w.a)(this,Object(v.a)(t).call(this,e))).headleClick=function(e){a.props.click()},a.onDelete=function(e){e.stopPropagation(),a.props.onDelete()},a.componentWillMount=function(){R(a.props.city).then(function(e){var t=A(e);a.setState({data:t})})},a.render=function(){var e=a.props.city,t=a.state.data;return r.a.createElement("div",{className:"weatherItem",onClick:a.headleClick},r.a.createElement(U.a,{style:{marginBottom:"1.5rem"}},r.a.createElement(q.a,{title:e,action:r.a.createElement(h.a,{"aria-label":"settings",onClick:a.onDelete},r.a.createElement(P.a,{color:"secondary"}))}),r.a.createElement(J.a,null,t?r.a.createElement(B,{data:t}):r.a.createElement("p",null,"cargando"))))},a.state={data:null},a}return Object(O.a)(t,e),t}(n.Component),z=a(181),V=a(169),$=a(167),K=a(168),Q=a(166);function Z(e){var t=e.show,a=e.city,n=e.onSubmit,c=e.onCancel;return r.a.createElement("div",null,r.a.createElement(z.a,{open:t,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Are you sure to delete this location ?"),r.a.createElement($.a,null,r.a.createElement(K.a,{id:"alert-dialog-description"},a)),r.a.createElement(V.a,null,r.a.createElement(E.a,{onClick:c,color:"primary"},"Disagree"),r.a.createElement(E.a,{onClick:n,color:"primary",autoFocus:!0},"Agree"))))}var ee=a(56),te=a.n(ee),ae=a(170);function ne(e){return r.a.createElement("div",{className:""},r.a.createElement(ae.a,{color:"primary",variant:"extended","aria-label":"add",onClick:function(){e.showModal()}},r.a.createElement(te.a,null)," NEW"))}var re=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(w.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1,deleteItem:null},a.modalSubmit=function(){a.setState({showModal:!1}),a.props.deleteCity(a.state.deleteItem)},a.modalCancel=function(){console.log("cancelado"),a.setState({showModal:!1,deleteItem:!1})},a.setDeleteItem=function(e){a.setState({deleteItem:e,showModal:!0})},a}return Object(O.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.props.cities;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"weatherList"},t.map(function(t,a){return r.a.createElement(X,{key:t+a,city:t,click:function(){return e.props.selectCity(t)},onDelete:function(){return e.setDeleteItem(a)}})}),r.a.createElement(ne,{showModal:this.props.showModal})),r.a.createElement(Z,{show:this.state.showModal,onSubmit:this.modalSubmit,onCancel:this.modalCancel,city:this.state.deleteItem}))}}]),t}(n.Component),ce=a(178),oe=a(81),ie=a.n(oe),le=a(171),ue=a(173),se=a(174),de=a(175),me=a(172);function pe(e){var t=function(){console.log("close")};return r.a.createElement(r.a.Fragment,null,console.log(e.searchResults),r.a.createElement(z.a,{open:e.open,"aria-labelledby":"form-dialog-title"},r.a.createElement(Q.a,{id:"form-dialog-title"},"New location"),r.a.createElement($.a,null,r.a.createElement(ce.a,{autoFocus:!0,margin:"dense",id:"city",label:"find",type:"text",onChange:function(t){var a=t.target.value;if(a.trim().length<3)return null;setTimeout(function(){e.searchCity(a)},200)},fullWidth:!0}),e.isLoading&&r.a.createElement(me.a,null),e.searchResults&&r.a.createElement(le.a,{component:"nav","aria-label":"main mailbox folders"},e.searchResults.map(function(t,a){return r.a.createElement(ue.a,{button:!0,onClick:function(){return function(t){e.addCity(e.searchResults[t])}(a)},key:t+a},r.a.createElement(se.a,null,r.a.createElement(te.a,null)),r.a.createElement(de.a,{primary:t}))}))),r.a.createElement(V.a,null,r.a.createElement(E.a,{onClick:t,color:"primary"},"Cancel"),r.a.createElement(ae.a,{color:"primary",onClick:t,"aria-label":"add"},r.a.createElement(ie.a,null)))))}var he=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(w.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleSelectionLocation=function(e){a.props.dispatchsetCity(e)},a}return Object(O.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){console.log("component did mount"),this.props.setUserLocation()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(re,{cities:this.props.cities,selectCity:this.handleSelectionLocation,showModal:this.props.onShowModal,deleteCity:this.props.onDeleteCity}),r.a.createElement(pe,{open:this.props.showModal,searchCity:this.props.searchCity,isLoading:this.props.isLoading,searchResults:this.props.searchResults,addCity:this.props.addCity}))}}]),t}(n.Component);he.propsType={setCity:S.a.func.isRequired};var fe=Object(i.b)(function(e){var t=e.cityReducer;return{cities:t.cities,isLoading:t.isLoading,searchResults:t.searchResults,showModal:t.showModal}},function(e){return{dispatchsetCity:function(t){return e(T(t))},setUserLocation:function(){return e(function(e){fetch("https://json.geoiplookup.io/").then(function(e){return e.json()}).then(function(t){var a=[t.city,t.country_code].join(",");e(k(a)),e(T(a))}).catch(function(e){return console.log(e)})})},searchCity:function(t){return e(M(t))},onShowModal:function(){return e({type:"SHOW_SEARCH_MODAL"})},onHideModal:function(){return e({type:"HIDE_SEARCH_MODAL"})},addCity:function(t){return e(k(t))},onDeleteCity:function(t){return e(function(e){return{type:"DELETE_CITY",payload:e}}(t))}}})(he),Ee=Object(l.a)(function(e){return{root:{margin:"1rem"}}}),ye=function(e){var t=e.weekDay,a=e.hour,n=e.data,c=Ee();return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:c.root},r.a.createElement(q.a,{title:t,subheader:a}),r.a.createElement(J.a,null,r.a.createElement(B,{data:n}))))},ge=function(e){var t=e.city,a=e.forecastExtendedData,n=r.a.createElement(me.a,null);return a&&a[t]&&(n=a[t].map(function(e,t){return r.a.createElement(ye,{weekDay:e.weekDay,hour:e.hour,data:e.data,key:t})})),r.a.createElement("div",{className:"forecastExtendedCont"},t&&r.a.createElement("h1",null,t),n)},be=function(e){function t(){return Object(b.a)(this,t),Object(w.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.city?r.a.createElement(ge,{city:this.props.city,forecastExtendedData:this.props.forecastExtendedData}):r.a.createElement("h1",null,"no se selecciono ninguna ciudad"))}}]),t}(n.Component),Ce=Object(i.b)(function(e){var t=e.cityReducer,a=e.extendedForecastReducer;return{city:t.selectedCity,forecastExtendedData:a}},null)(be),we=(a(122),Object(l.a)(function(e){return{root:{flexGrow:1},paper:{padding:"1rem",textAlign:"center"},container:{marginTop:"80px"}}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(26),Oe=a(82),je=a(57),Se=a(16),_e=a(83),xe={selectedCity:null,cities:[],searchResults:[],isLoading:!1,showModal:!1},De=Object(ve.c)({cityReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY!":return Object(Se.a)({},e,{selectedCity:t.payload});case"ADD_CITY":var a=[].concat(Object(_e.a)(e.cities),[t.payload]);return Object(Se.a)({},e,{cities:a,showModal:!1});case"SEARCH_CITY_START":return Object(Se.a)({},e,{isLoading:!0});case"SEARCH_CITY_FAIL":return Object(Se.a)({},e,{isLoading:!1});case"SEARCH_CITY_SUCCESS":return Object(Se.a)({},e,{isLoading:!1,searchResults:t.payload});case"SHOW_SEARCH_MODAL":return Object(Se.a)({},e,{showModal:!0,searchResults:[]});case"HIDE_SEARCH_MODAL":return Object(Se.a)({},e,{showModal:!1,searchResults:[]});case"DELETE_CITY":return a=e.cities.filter(function(e,a){return a!==t.payload}),e.selectedCity===e.cities[t.payload]?Object(Se.a)({},e,{cities:a,selectedCity:e.cities[0]}):0===e.cities.length?(console.log("lentg = 0"),Object(Se.a)({},e,{cities:a,selectedCity:null})):Object(Se.a)({},e,{cities:a});default:return e}},extendedForecastReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FORECAST_DATA":var a=t.payload,n=a.city,r=a.forecastExtend;return Object(Se.a)({},e,Object(je.a)({},n,r));default:return e}}}),Re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ve.d,Ae=Object(ve.e)(De,Re(Object(ve.a)(Oe.a)));o.a.render(r.a.createElement(i.a,{store:Ae},r.a.createElement(function(){var e=we();return r.a.createElement("div",{className:e.root},r.a.createElement(g,null),r.a.createElement(s.a,{className:e.container,maxWidth:"md"},r.a.createElement(u.a,{container:!0,spacing:3},r.a.createElement(u.a,{item:!0,xs:12,sm:6},r.a.createElement(d.a,{className:e.paper},r.a.createElement(fe,null))),r.a.createElement(u.a,{item:!0,xs:12,sm:6},r.a.createElement(d.a,{className:e.paper},r.a.createElement(Ce,null))))))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},94:function(e,t,a){e.exports=a(124)}},[[94,2,1]]]);
//# sourceMappingURL=main.cc1892bf.chunk.js.map